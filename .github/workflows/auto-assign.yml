# Nome do workflow que aparecer√° na aba Actions do GitHub
name: Auto Assign

# Define quando este workflow ser√° executado
on:
  # Executa quando uma issue √© criada
  issues:
    types: [opened]
  # Executa quando um pull request √© criado
  pull_request:
    types: [opened]

# Define os jobs que ser√£o executados
jobs:
  auto-assign:
    # Define em qual sistema operacional rodar√°
    runs-on: ubuntu-latest
    
    # Permiss√µes necess√°rias para o workflow funcionar
    permissions:
      issues: write
      pull-requests: write
    
    # Passos que ser√£o executados
    steps:
      # Atribui√ß√£o autom√°tica para issues
      - name: 'Auto-assign issue'
        # S√≥ executa se o evento for uma issue
        if: github.event_name == 'issues'
        uses: pozil/auto-assign-issue@v1
        with:
          # Token de autentica√ß√£o do GitHub
          repo-token: ${{ secrets.GITHUB_TOKEN }}
          # Lista de usu√°rios que podem ser atribu√≠dos
          assignees: TalyLisboa
          # N√∫mero de pessoas a serem atribu√≠das aleatoriamente
          numOfAssignee: 1
          # Remove o autor da issue da lista de poss√≠veis assignees
          abortIfPreviousAssignees: true

      # Atribui√ß√£o autom√°tica para pull requests
      - name: 'Auto-assign PR'
        # S√≥ executa se o evento for um pull request
        if: github.event_name == 'pull_request'
        uses: kentaro-m/auto-assign-action@v1.2.5
        with:
          # Token de autentica√ß√£o
          repo-token: "${{ secrets.GITHUB_TOKEN }}"
          # Arquivo de configura√ß√£o (opcional - pode criar um .github/auto_assign.yml)
          configuration-path: ".github/auto_assign.yml"

      # Adicionar label autom√°tica para novas issues
      - name: 'Add labels to issue'
        if: github.event_name == 'issues'
        uses: actions-ecosystem/action-add-labels@v1
        with:
          labels: |
            needs-triage
            new-issue

      # Adicionar label autom√°tica para novos PRs
      - name: 'Add labels to PR'
        if: github.event_name == 'pull_request'
        uses: actions-ecosystem/action-add-labels@v1
        with:
          labels: |
            needs-review
            
      # Coment√°rio de boas-vindas em issues
      - name: 'Welcome comment on issue'
        if: github.event_name == 'issues'
        uses: peter-evans/create-or-update-comment@v3
        with:
          issue-number: ${{ github.event.issue.number }}
          body: |
            üëã Obrigado por abrir esta issue, @${{ github.event.issue.user.login }}!
            
            Nossa equipe foi notificada e analisar√° sua solicita√ß√£o em breve.
            
            **Pr√≥ximos passos:**
            - Um membro da equipe ser√° atribu√≠do automaticamente
            - Analisaremos e priorizaremos sua solicita√ß√£o
            - Voc√™ receber√° uma atualiza√ß√£o assim que poss√≠vel
            
            Se esta √© uma quest√£o urgente, adicione o label `urgent` ou mencione @TalyLisboa.

      # Coment√°rio de boas-vindas em PRs
      - name: 'Welcome comment on PR'
        if: github.event_name == 'pull_request'
        uses: peter-evans/create-or-update-comment@v3
        with:
          issue-number: ${{ github.event.pull_request.number }}
          body: |
            üéâ Obrigado pela contribui√ß√£o, @${{ github.event.pull_request.user.login }}!
            
            **Checklist de revis√£o:**
            - [ ] O c√≥digo segue nossos padr√µes
            - [ ] Testes foram adicionados/atualizados
            - [ ] Documenta√ß√£o foi atualizada
            - [ ] Sem conflitos com a branch principal
            
            Um revisor ser√° atribu√≠do automaticamente. Enquanto isso, certifique-se de que todos os checks est√£o passando!
